lab:
  description: ''
  notes: ''
  title: JPMC-Branch
  version: 0.0.5
nodes:
  - id: n0
    label: BR-2-SW1
    node_definition: c9kv-20220216
    x: 700
    y: 300
    configuration:
    hide_links: null
    image_definition: C9Kv-17-7
    ram: 16384
    cpus: 4
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Greenwich Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet0/0
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet1/0/1
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet1/0/2
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet1/0/3
        type: physical
  - id: n1
    label: BR-2-SW2
    node_definition: c9kv-20220216
    x: 700
    y: 450
    configuration:
    hide_links: null
    image_definition: C9Kv-17-7
    ram: 16384
    cpus: 4
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Greenwich Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet0/0
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet1/0/1
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet1/0/2
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet1/0/3
        type: physical
  - id: n2
    label: BR-1-SW1
    node_definition: c9kv-20220216
    x: 650
    y: -50
    configuration: ''
    hide_links: null
    image_definition: C9Kv-17-7
    ram: 16384
    cpus: 4
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Yamhill Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet0/0
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet1/0/1
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet1/0/2
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet1/0/3
        type: physical
  - id: n3
    label: bridge-302-1
    node_definition: external_connector
    x: -450
    y: -150
    configuration: bridge302
    hide_links: null
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port
        type: physical
  - id: n4
    label: MPLS
    node_definition: cat8000v
    x: 0
    y: 50
    configuration: |-
      !
      hostname MPLS
      !
      !
      ip dhcp pool BR-1-R1
       network 169.155.156.12 255.255.255.252
       default-router 169.155.156.14
      !
      ip dhcp pool BR-2-R1
       network 169.155.156.16 255.255.255.252
       default-router 169.155.156.18
      !
      ip dhcp pool DC-1-R1
       network 169.155.156.4 255.255.255.252
       default-router 169.155.156.6
      !
      ip dhcp pool DC-2-R1
       network 169.155.156.8 255.255.255.252
       default-router 169.155.156.10
      !
      !
      interface GigabitEthernet1
       description BR-1-R1
       ip address 169.155.156.14 255.255.255.252
       no shut
      !
      interface GigabitEthernet2
       description BR-2-R1
       ip address 169.155.156.18 255.255.255.252
       no shut
      !
      interface GigabitEthernet3
       description DC-1-R1
       ip address 169.155.156.6 255.255.255.252
       no shut
      !
      interface GigabitEthernet4
       description DC-2-R1
       ip address 169.155.156.10 255.255.255.252
       no shut
      !
      interface GigabitEthernet5
       description SD-WAN_CONTROLLERS
       ip address 169.155.156.2 255.255.255.252
       no shut
      !
      !
      router bgp 65200
       bgp log-neighbor-changes
       neighbor 169.155.156.1 remote-as 65999
       !
       address-family ipv4
        network 169.155.156.4 mask 255.255.255.252
        network 169.155.156.8 mask 255.255.255.252
        network 169.155.156.12 mask 255.255.255.252
        network 169.155.156.16 mask 255.255.255.252
        neighbor 169.155.156.1 activate
        neighbor 169.155.156.1 route-map RM_UNDER out
       exit-address-family
      !
      !
      ip prefix-list PL_UNDER seq 5 permit 169.155.156.4/30
      ip prefix-list PL_UNDER seq 10 permit 169.155.156.8/30
      ip prefix-list PL_UNDER seq 15 permit 169.155.156.12/30
      ip prefix-list PL_UNDER seq 20 permit 169.155.156.16/30
      ip prefix-list PL_UNDER seq 25 permit 169.155.156.28/30
      !
      route-map RM_UNDER permit 10
       match ip address prefix-list PL_UNDER
      !
      !
      !
      !
      end
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - simulated_provider
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
  - id: n5
    label: INET
    node_definition: cat8000v
    x: 0
    y: 200
    configuration: |-
      !
      hostname INET
      !
      ip dhcp pool BR-1-R1
       network 169.155.156.60 255.255.255.252
       default-router 169.155.156.62
      !
      ip dhcp pool BR-2-R2
       network 169.155.156.64 255.255.255.252
       default-router 169.155.156.66
      !
      ip dhcp pool DC-1-R1
       network 169.155.156.52 255.255.255.252
       default-router 169.155.156.54
      !
      ip dhcp pool DC-2-R1
       network 169.155.156.56 255.255.255.252
       default-router 169.155.156.58
      !

      interface GigabitEthernet1
       description BR-1-R1
       ip address 169.155.156.62 255.255.255.252
       no shut
      !
      interface GigabitEthernet2
       description BR-2-R2
       ip address 169.155.156.66 255.255.255.252
       no shut
      !
      interface GigabitEthernet3
       description DC-1-R1
       ip address 169.155.156.54 255.255.255.252
       no shut
      !
      interface GigabitEthernet4
       description DC-2-R1
       ip address 169.155.156.58 255.255.255.252
       no shut
      !
      interface GigabitEthernet5
       description SD-WAN_CONTROLLERS
       ip address 169.155.156.50 255.255.255.252
       no shut
      !
      router bgp 77
       bgp log-neighbor-changes
       neighbor 169.155.156.49 remote-as 65999
       !
       address-family ipv4
        network 169.155.156.52 mask 255.255.255.252
        network 169.155.156.56 mask 255.255.255.252
        network 169.155.156.60 mask 255.255.255.252
        network 169.155.156.64 mask 255.255.255.252
        neighbor 169.155.156.49 activate
        neighbor 169.155.156.49 route-map RM_UNDER out
       exit-address-family
      !
      !
      ip prefix-list PL_UNDER seq 5 permit 169.155.156.52/30
      ip prefix-list PL_UNDER seq 10 permit 169.155.156.56/30
      ip prefix-list PL_UNDER seq 15 permit 169.155.156.60/30
      ip prefix-list PL_UNDER seq 20 permit 169.155.156.64/30
      !
      route-map RM_UNDER permit 10
       match ip address prefix-list PL_UNDER
      !
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - simulated_provider
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
  - id: n6
    label: Cellular
    node_definition: cat8000v
    x: 0
    y: 350
    configuration: |
      !
      hostname CELLULAR
      !
      !
      ip dhcp pool BR-1-R1
       network 169.155.156.108 255.255.255.252
       default-router 169.155.156.110
      !
      ip dhcp pool BR-2-TSG
       network 169.155.156.112 255.255.255.252
       default-router 169.155.156.114
      !
      ip dhcp pool DC-1-R1
       network 169.155.156.100 255.255.255.252
       default-router 169.155.156.102
      !
      ip dhcp pool DC-2-R1
       network 169.155.156.104 255.255.255.252
       default-router 169.155.156.106
      !
      !
      interface GigabitEthernet1
       description BR-1-R1
       ip address 169.155.156.110 255.255.255.252
       no shut
      !
      interface GigabitEthernet2
       description BR-2-TSG
       ip address 169.155.156.114 255.255.255.252
       no shut
      !
      interface GigabitEthernet3
       description DC-1-R1
       ip address 169.155.156.102 255.255.255.252
       no shut
      !
      interface GigabitEthernet4
       description DC-2-R1
       ip address 169.155.156.106 255.255.255.252
       no shut
      !
      interface GigabitEthernet5
       description SD-WAN_CONTROLLERS
       ip address 169.155.156.98 255.255.255.252
       no shut
      !
      !
      router bgp 88
       bgp log-neighbor-changes
       neighbor 169.155.156.97 remote-as 65999
       !
       address-family ipv4
        network 169.155.156.100 mask 255.255.255.252
        network 169.155.156.104 mask 255.255.255.252
        network 169.155.156.108 mask 255.255.255.252
        network 169.155.156.112 mask 255.255.255.252
        neighbor 169.155.156.97 activate
        neighbor 169.155.156.97 route-map RM_UNDER out
       exit-address-family
      !
      !
      ip prefix-list PL_UNDER seq 5 permit 169.155.156.100/30
      ip prefix-list PL_UNDER seq 10 permit 169.155.156.104/30
      ip prefix-list PL_UNDER seq 15 permit 169.155.156.108/30
      ip prefix-list PL_UNDER seq 20 permit 169.155.156.112/30
      !
      route-map RM_UNDER permit 10
       match ip address prefix-list PL_UNDER
      !
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - simulated_provider
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
      - id: i7
        slot: 6
        label: GigabitEthernet7
        type: physical
  - id: n7
    label: SD-WAN-Controllers
    node_definition: cat8000v
    x: -250
    y: -150
    configuration: |-
      platform console serial
      !
      hostname SD-WAN_CONTROLLERS
      !
      !
      !
      interface GigabitEthernet1
       description MPLS
       ip address 169.155.156.1 255.255.255.252
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      interface GigabitEthernet2
       description INET
       ip address 169.155.156.49 255.255.255.252
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      interface GigabitEthernet3
       description CELLUAR
       ip address 169.155.156.97 255.255.255.252
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      interface GigabitEthernet4
       description SD-WAN Management
       ip address 10.30.2.10 255.255.255.0
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      !
      router bgp 65999
       bgp log-neighbor-changes
       neighbor 169.155.156.2 remote-as 65200
       neighbor 169.155.156.50 remote-as 77
       neighbor 169.155.156.98 remote-as 88
       !
       address-family ipv4
        network 10.30.2.0 mask 255.255.255.0
        neighbor 169.155.156.2 activate
        neighbor 169.155.156.2 route-map RM_SDN out
        neighbor 169.155.156.50 activate
        neighbor 169.155.156.50 route-map RM_SDN out
        neighbor 169.155.156.98 activate
        neighbor 169.155.156.98 route-map RM_SDN out
       exit-address-family
      !
      !
      ip prefix-list PL_SDWAN seq 5 permit 10.30.2.0/24
      !
      !
      route-map RM_SDN permit 10
       match ip address prefix-list PL_SDWAN
      !
      !
      !
      !
      !
      end
    hide_links: null
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n8
    label: BR-2-TSG-Cell
    node_definition: cat8000v
    x: 400
    y: 350
    configuration: |-
      platform console serial
      !
      hostname BR-2-TSG
      !
      !
      ip dhcp pool R1
       network 10.0.10.0 255.255.255.0
       default-router 10.0.10.1
      !
      ip dhcp pool R2
       network 10.0.20.0 255.255.255.0
       default-router 10.0.20.1
      !
      !
      interface GigabitEthernet1
       description BR-2-R2
       ip address 10.0.10.1 255.255.255.0
       ip nat inside
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      interface GigabitEthernet2
       description BR-2-R2
       ip address 10.0.20.1 255.255.255.0
       ip nat inside
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !
      interface GigabitEthernet3
       description CELLUAR
       ip address dhcp
       ip nat outside
       negotiation auto
       no mop enabled
       no mop sysid
       no shutdown
      !

      ip nat inside source list R1-R2 interface GigabitEthernet3 overload
      !
      !
      !
      ip access-list standard R1-R2
       permit 10.0.10.0 0.0.0.255
       permit 10.0.20.0 0.0.0.255
       deny any
      !
      !
      !
      end
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Greenwich Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n9
    label: DC-1-access
    node_definition: cat8000v
    x: -750
    y: 50
    configuration: |-
      hostname DC-1-access
      !
      boot-start-marker
      boot-end-marker
      !
      !
      vrf definition GUEST
       rd 65111:55
       !
       address-family ipv4
       exit-address-family
      !
      vrf definition IOT
       rd 65111:33
       !
       address-family ipv4
       exit-address-family
      !
      no logging console
      !
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      login on-success log
      !
      !
      !
      !
      !
      !
      !
      subscriber templating
      !
      multilink bundle-name authenticated
      !
      !
      !
      crypto pki trustpoint SLA-TrustPoint
       enrollment pkcs12
       revocation-check crl
      !
      !
      crypto pki certificate chain SLA-TrustPoint
       certificate ca 01
        30820321 30820209 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
        32310E30 0C060355 040A1305 43697363 6F312030 1E060355 04031317 43697363 
        6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31 33303533 30313934 
        3834375A 170D3338 30353330 31393438 34375A30 32310E30 0C060355 040A1305 
        43697363 6F312030 1E060355 04031317 43697363 6F204C69 63656E73 696E6720 
        526F6F74 20434130 82012230 0D06092A 864886F7 0D010101 05000382 010F0030 
        82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6 17222EA1 F1EFF64D 
        CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A 9CAE6388 8A38E520 
        1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3 700A8BF7 D8F256EE 
        4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7 104FDC5F EA2956AC 
        7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3 C0BD23CF 58BD7188 
        68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F 539BA42B 42C68BB7 
        C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4 5D5D5FB8 8F27D191 
        C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B DF5F4368 95135E44 
        DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F 0101FF04 04030201 
        06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D 0E041604 1449DC85 
        4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648 86F70D01 010B0500 
        03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0 49631C78 240DA905 
        604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB 9093D3B1 6C9E3D8B 
        D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646 5575B146 8DFC66A8 
        467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC 11BA9CD2 55A9232C 
        7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86 C71E3B49 1765308B 
        5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229 C37C1E69 39F08678 
        80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A B623CDBD 230E3AFB 
        418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE 0275156F 719BB2F0 
        D697DF7F 28
          quit
      !
      license udi pid C8000V sn 99KU112MAJW
      diagnostic bootup level minimal
      memory free low-watermark processor 68445
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback133
       description IOT LoopBack
       vrf forwarding IOT
       ip address 172.50.111.133 255.255.255.255
      !
      interface Loopback155
       description GUEST LoopBack
       vrf forwarding GUEST
       ip address 172.50.111.155 255.255.255.255
      !
      interface GigabitEthernet1
       description Main Interface for SD-WAN Subnets
       no ip address
       negotiation auto
       no shut
      !
      interface GigabitEthernet1.11
       description SD_WAN User Subnet
       encapsulation dot1Q 11
       ip address 172.50.111.1 255.255.255.0
      !
      interface GigabitEthernet1.33
       description SD_WAN IOT Subnet
       encapsulation dot1Q 33
       vrf forwarding IOT
       ip address 172.50.133.1 255.255.255.0
      !
      interface GigabitEthernet1.55
       description SD_WAN Guest Subnet
       encapsulation dot1Q 55
       vrf forwarding GUEST
       ip address 172.50.155.1 255.255.255.0
      !
      interface GigabitEthernet2
       description Link to Services
       ip address 111.111.99.1 255.255.255.0
       negotiation auto
       no shut
      !
      interface GigabitEthernet3
       ip address 10.30.2.8 255.255.255.0
       negotiation auto
       no shut
      !
      interface GigabitEthernet4
       no ip address
       shutdown
       negotiation auto
      !
      router bgp 65111
       bgp log-neighbor-changes
       neighbor 172.50.111.2 remote-as 65111
       !
       address-family ipv4
        network 10.30.2.0 mask 255.255.255.0
        network 111.111.99.0 mask 255.255.255.0
        network 172.50.111.0 mask 255.255.255.0
        neighbor 172.50.111.2 activate
       exit-address-family
       !
       address-family ipv4 vrf GUEST
        network 172.50.111.155 mask 255.255.255.255
        neighbor 172.50.155.2 remote-as 65111
        neighbor 172.50.155.2 activate
       exit-address-family
       !
       address-family ipv4 vrf IOT
        network 172.50.111.133 mask 255.255.255.255
        neighbor 172.50.133.2 remote-as 65111
        neighbor 172.50.133.2 activate
       exit-address-family
      !
      ip forward-protocol nd
      no ip http server
      ip http secure-server
      !
      !
      !
      !
      !
      !
      control-plane
      !
      !
      line con 0
       exec-timeout 0 0
       stopbits 1
      line aux 0
      line vty 0
       login
       transport input ssh
      line vty 1
       login
       length 0
       transport input ssh
      line vty 2 4
       login
       transport input ssh
      !
      call-home
       ! If contact email address in call-home is configured as sch-smart-licensing@cisco.com
       ! the email address configured in Cisco Smart License Portal will be used as contact email address to send SCH notifications.
       contact-email-addr sch-smart-licensing@cisco.com
       profile "CiscoTAC-1"
        active
        destination transport-method http
      !
      !
      !
      !
      !
      !
      end
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n10
    label: DC-2-access
    node_definition: cat8000v
    x: -750
    y: 350
    configuration: |-
      hostname DC-2-access
      !
      vrf definition GUEST
       rd 65222:55
       !
       address-family ipv4
       exit-address-family
      !
      vrf definition IOT
       rd 65222:33
       !
       address-family ipv4
       exit-address-family
      !
      !
      !
      interface Loopback133
       description IOT LoopBack
       vrf forwarding IOT
       ip address 172.50.222.133 255.255.255.255
      !
      interface Loopback155
       description GUEST LoopBack
       vrf forwarding GUEST
       ip address 172.50.222.155 255.255.255.255
      !
      interface GigabitEthernet1
       description Main Interface for SD-WAN Subnets
       no ip address
       no shutdown
      !
      interface GigabitEthernet1.11
       description SD_WAN User Subnet
       encapsulation dot1Q 11
       ip address 172.50.211.1 255.255.255.0
      !
      interface GigabitEthernet1.33
       description SD_WAN IOT Subnet
       encapsulation dot1Q 33
       vrf forwarding IOT
       ip address 172.50.233.1 255.255.255.0
      !
      interface GigabitEthernet1.55
       description SD_WAN Guest Subnet
       encapsulation dot1Q 55
       vrf forwarding GUEST
       ip address 172.50.205.1 255.255.255.0
      !
      !
      interface GigabitEthernet2
       description Link to Services
       ip address 222.222.99.1 255.255.255.0
       no shutdown
      !
      !
      !
      router bgp 65222
       bgp log-neighbor-changes
       neighbor 172.50.211.2 remote-as 65222
       !
       address-family ipv4
        network 172.50.211.0 mask 255.255.255.0
        network 222.222.99.0 mask 255.255.255.0
        neighbor 172.50.211.2 activate
       exit-address-family
       !
       address-family ipv4 vrf GUEST
        network 172.50.222.155 mask 255.255.255.255
        neighbor 172.50.205.2 remote-as 65222
        neighbor 172.50.205.2 activate
       exit-address-family
       !
       address-family ipv4 vrf IOT
        network 172.50.222.133 mask 255.255.255.255
        neighbor 172.50.233.2 remote-as 65222
        neighbor 172.50.233.2 activate
       exit-address-family
      !
    hide_links: null
    image_definition: Cat-8000v-17.6.3
    ram: 4096
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 2
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n11
    label: BR-1-R1
    node_definition: cedge
    x: 500
    y: -50
    configuration:
    hide_links: false
    image_definition: Cedge c8kv -17.3.6
    ram: 4096
    cpus: 2
    cpu_limit: 30
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Yamhill Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
  - id: n12
    label: BR-2-R1
    node_definition: cedge
    x: 550
    y: 300
    configuration:
    hide_links: false
    ram: 4096
    cpus: 2
    cpu_limit: 30
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Greenwich Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
  - id: n13
    label: BR-2-R2
    node_definition: cedge
    x: 550
    y: 450
    configuration:
    hide_links: null
    ram: 4096
    cpus: 2
    cpu_limit: 30
    data_volume: 0
    boot_disk_size: 0
    tags:
      - Greenwich Branch
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
      - id: i5
        slot: 4
        label: GigabitEthernet5
        type: physical
      - id: i6
        slot: 5
        label: GigabitEthernet6
        type: physical
  - id: n14
    label: DC-2-R1
    node_definition: cedge
    x: -550
    y: 350
    configuration:
    hide_links: null
    image_definition: Cedge c8kv -17.3.6
    ram: 4096
    cpus: 2
    cpu_limit: 30
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 2
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n15
    label: DC-1-R1
    node_definition: cedge
    x: -550
    y: 50
    configuration:
    hide_links: null
    image_definition: Cedge c8kv -17.3.6
    ram: 4096
    cpus: 2
    cpu_limit: 30
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - enterprise_host
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        slot: 0
        label: GigabitEthernet1
        type: physical
      - id: i2
        slot: 1
        label: GigabitEthernet2
        type: physical
      - id: i3
        slot: 2
        label: GigabitEthernet3
        type: physical
      - id: i4
        slot: 3
        label: GigabitEthernet4
        type: physical
  - id: n16
    label: bridge-403
    node_definition: external_connector
    x: -1
    y: -105
    configuration: bridge403
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port
        type: physical
  - id: n17
    label: bridge-402
    node_definition: external_connector
    x: 1
    y: 99
    configuration: bridge402
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - unknown_location
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port
        type: physical
  - id: n18
    label: dc1-rail
    node_definition: unmanaged_switch
    x: -888
    y: -24
    configuration: ums-39673ce8-22
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port0
        type: physical
      - id: i1
        slot: 1
        label: port1
        type: physical
      - id: i2
        slot: 2
        label: port2
        type: physical
      - id: i3
        slot: 3
        label: port3
        type: physical
      - id: i4
        slot: 4
        label: port4
        type: physical
      - id: i5
        slot: 5
        label: port5
        type: physical
      - id: i6
        slot: 6
        label: port6
        type: physical
      - id: i7
        slot: 7
        label: port7
        type: physical
  - id: n19
    label: services
    node_definition: alpine
    x: -782
    y: -93
    configuration: "# this is a shell script which will be sourced at boot\nhostname\
      \ services\n# configurable user account\nUSERNAME=cisco\nPASSWORD=cisco\n\n\
      echo \"auto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n\
      \taddress 10.2.1.130\n\tnetmask 255.255.255.0\n\tgateway 10.2.1.254\n\nauto\
      \ eth1\niface eth1 inet static\n\taddress 111.111.99.130\n\tnetmask 255.255.255.0\n\
      \tup ip route add 172.50.0.0/16 via 111.111.99.1\n\tup ip route add 222.222.0.0/16\
      \ via 111.111.99.1\n\" > /etc/network/interfaces\n\n/etc/init.d/networking restart\n\
      \n# nameserver 10.2.1.29 and 10.2.1.30 as well as serch lab.local\n# will have\
      \ been learned from DHCP lease at boot, prior to the static\n# addressing above\
      \ being allocated (which works)\n\napk add --update dnsmasq\n\necho \"127.0.0.1\
      \       localhost\n111.111.99.130  services\n10.2.1.130      services\n111.111.99.10\
      \   apps\n10.2.1.139      apps\n\" > /etc/hosts\n\nmv dnsmasq.conf dnsmasq.conf.original\n\
      \necho \"domain-needed\nbogus-priv\nno-resolv\nlocal=/jpmclab/\nserver=/lab.local/10.2.1.29\n\
      server=/lab.local/10.2.1.30\nserver=8.8.8.8\nserver=8.8.4.4\nexpand-hosts\n\
      domain=jpmclab\n\nlog-facility=/var/log/dnsmasq.log\nlog-async\nlog-queries\n\
      log-dhcp\n\ndhcp-lease-max=95\n\n# dynamic pools\n\ndhcp-range=dc-1-lan,111.111.99.150,111.111.99.250,255.255.255.0,30m\n\
      dhcp-option=dc-1-lan,3,111.111.99.1 #dhcp-option=option:router\n#dhcp-option=dc-1-lan,119,jpmclab,lab.local\
      \ #dhcp-option=option:domain-search\n#dhcp-option-force=dc-1-lan,119 #dhcp-option-force=option:domain-search\
      \ (if client does not ask for)\n\ndhcp-range=dc-2-lan,222.222.99.150,222.222.99.250,255.255.255.0,30m\n\
      dhcp-option=dc-2-lan,3,222.222.99.1 #dhcp-option=option:router\n\ndhcp-range=br-1,172.50.1.200,172.50.1.250,255.255.255.0\n\
      dhcp-option=br-1,3,172.50.1.1\ndhcp-option=br-1,43,5A1N;B2;K4;I10.30.2.253;J80\n\
      \ndhcp-range=br-2-1,172.50.2.200,172.50.2.250,255.255.255.0\ndhcp-option=br-2-1,3,172.50.2.1\n\
      dhcp-option=br-2-1,43,5A1N;B2;K4;I10.30.2.253;J80\n\ndhcp-range=br-2-2,172.50.3.200,172.50.3.250,255.255.255.0\n\
      dhcp-option=br-2-2,3,172.50.3.1\ndhcp-option=br-2-2,43,5A1N;B2;K4;I10.30.2.253;J80\n\
      \n# static addressing\n\n\" > /etc/dnsmasq.conf\n\nrc-service dnsmasq start"
    hide_links: false
    ram: 512
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 16
    tags:
      - CDC 1
      - enterprise_host
    interfaces:
      - id: i0
        slot: 0
        label: eth0
        type: physical
      - id: i1
        slot: 1
        label: eth1
        type: physical
  - id: n20
    label: backbone
    node_definition: external_connector
    x: -729
    y: -181
    configuration: bridge0
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port
        type: physical
  - id: n21
    label: client-1
    node_definition: alpine
    x: -986
    y: 41
    configuration: |
      # this is a shell script which will be sourced at boot
      hostname client-1
      # configurable user account
      USERNAME=cisco
      PASSWORD=cisco

      echo "auto lo
      iface lo inet loopback

      auto eth0
      iface eth0 inet dhcp
        hostname client-1
      " > /etc/network/interfaces

      # service networking restart
      /etc/init.d/networking restart
    hide_links: false
    ram: 512
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 16
    tags:
      - CDC 1
      - enterprise_host
    interfaces:
      - id: i0
        slot: 0
        label: eth0
        type: physical
  - id: n22
    label: backbone-rail
    node_definition: unmanaged_switch
    x: -890
    y: -182
    configuration: ums-17ed73e9-08
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port0
        type: physical
      - id: i1
        slot: 1
        label: port1
        type: physical
      - id: i2
        slot: 2
        label: port2
        type: physical
      - id: i3
        slot: 3
        label: port3
        type: physical
      - id: i4
        slot: 4
        label: port4
        type: physical
      - id: i5
        slot: 5
        label: port5
        type: physical
      - id: i6
        slot: 6
        label: port6
        type: physical
      - id: i7
        slot: 7
        label: port7
        type: physical
  - id: n23
    label: dc2-rail
    node_definition: unmanaged_switch
    x: -879
    y: 350
    configuration: ums-819c8706-d6
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 2
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port0
        type: physical
      - id: i1
        slot: 1
        label: port1
        type: physical
      - id: i2
        slot: 2
        label: port2
        type: physical
      - id: i3
        slot: 3
        label: port3
        type: physical
      - id: i4
        slot: 4
        label: port4
        type: physical
      - id: i5
        slot: 5
        label: port5
        type: physical
      - id: i6
        slot: 6
        label: port6
        type: physical
      - id: i7
        slot: 7
        label: port7
        type: physical
  - id: n24
    label: client-2
    node_definition: alpine
    x: -977
    y: 350
    configuration: |
      # this is a shell script which will be sourced at boot
      hostname client-2
      # configurable user account
      USERNAME=cisco
      PASSWORD=cisco

      echo "auto lo
      iface lo inet loopback

      auto eth0
      iface eth0 inet dhcp
        hostname client-2
      " > /etc/network/interfaces

      # service networking restart
      /etc/init.d/networking restart
    hide_links: false
    ram: 512
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 16
    tags:
      - CDC 2
      - enterprise_host
    interfaces:
      - id: i0
        slot: 0
        label: eth0
        type: physical
  - id: n25
    label: bridge-302-2
    node_definition: external_connector
    x: -886
    y: 162
    configuration: bridge302
    hide_links: false
    ram: 0
    cpus: 0
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 0
    tags:
      - CDC 1
      - cml_infrastructure
    interfaces:
      - id: i0
        slot: 0
        label: port
        type: physical
  - id: n26
    label: apps
    node_definition: alpine
    x: -989
    y: -90
    configuration: "# this is a shell script which will be sourced at boot\nhostname\
      \ apps\n# configurable user account\nUSERNAME=cisco\nPASSWORD=cisco\n\n\necho\
      \ \"auto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n\t\
      address 10.2.1.139\n\tnetmask 255.255.255.0\n\tgateway 10.2.1.254\n\nauto eth1\n\
      iface eth1 inet static\n\taddress 111.111.99.10\n\tnetmask 255.255.255.0\n\t\
      up ip route add 172.50.0.0/16 via 111.111.99.1\n\tup ip route add 222.222.99.0/24\
      \ via 111.111.99.1\n\" > /etc/network/interfaces\n\n/etc/init.d/networking restart\n\
      \necho \"nameserver 111.111.99.130\n\" > /etc/resolv.conf\n\nmkdir /etc/udhcpc\n\
      echo \"RESOLV_CONF=\\\"no\\\"\n\" > /etc/udhcpc/udhcpc.conf\n\nsed  -i \"s/#http:\\\
      /\\/dl-cdn.alpinelinux.org\\/alpine\\/v3.14\\/community/http:\\/\\/dl-cdn.alpinelinux.org\\\
      /alpine\\/v3.14\\/community/\" /etc/apk/repositories\napk update\napk add docker\n\
      addgroup cisco docker\nrc-update add docker boot\nrc-service docker start\n\
      apk add docker-compose"
    hide_links: false
    ram: 512
    cpus: 1
    cpu_limit: 100
    data_volume: 0
    boot_disk_size: 16
    tags:
      - CDC 1
      - enterprise_host
    interfaces:
      - id: i0
        slot: 0
        label: eth0
        type: physical
      - id: i1
        slot: 1
        label: eth1
        type: physical
links:
  - id: l0
    i1: i2
    n1: n6
    i2: i3
    n2: n8
    label: Cellular-GigabitEthernet2<->BR-2-TSG-Cell-GigabitEthernet3
  - id: l1
    i1: i0
    n1: n3
    i2: i4
    n2: n7
    label: ext-conn-0-port<->SD-WAN-Controllers-GigabitEthernet4
  - id: l2
    i1: i5
    n1: n4
    i2: i1
    n2: n7
    label: MPLS-GigabitEthernet5<->SD-WAN-Controllers-GigabitEthernet1
  - id: l3
    i1: i5
    n1: n5
    i2: i2
    n2: n7
    label: INET-GigabitEthernet5<->SD-WAN-Controllers-GigabitEthernet2
  - id: l4
    i1: i5
    n1: n6
    i2: i3
    n2: n7
    label: Cellular-GigabitEthernet5<->SD-WAN-Controllers-GigabitEthernet3
  - id: l5
    i1: i1
    n1: n4
    i2: i1
    n2: n11
    label: MPLS-GigabitEthernet1<->BR-1-R1-GigabitEthernet1
  - id: l6
    i1: i1
    n1: n5
    i2: i2
    n2: n11
    label: INET-GigabitEthernet1<->BR-1-R1-GigabitEthernet2
  - id: l7
    i1: i2
    n1: n4
    i2: i1
    n2: n12
    label: MPLS-GigabitEthernet2<->BR-2-R1-GigabitEthernet1
  - id: l8
    i1: i2
    n1: n5
    i2: i1
    n2: n13
    label: INET-GigabitEthernet2<->BR-2-R2-GigabitEthernet1
  - id: l9
    i1: i2
    n1: n8
    i2: i2
    n2: n13
    label: BR-2-TSG-Cell-GigabitEthernet2<->BR-2-R2-GigabitEthernet2
  - id: l10
    i1: i1
    n1: n8
    i2: i2
    n2: n12
    label: BR-2-TSG-Cell-GigabitEthernet1<->BR-2-R1-GigabitEthernet2
  - id: l11
    i1: i4
    n1: n4
    i2: i1
    n2: n14
    label: MPLS-GigabitEthernet4<->DC-2-R1-GigabitEthernet1
  - id: l12
    i1: i4
    n1: n5
    i2: i2
    n2: n14
    label: INET-GigabitEthernet4<->DC-2-R1-GigabitEthernet2
  - id: l13
    i1: i4
    n1: n6
    i2: i3
    n2: n14
    label: Cellular-GigabitEthernet4<->DC-2-R1-GigabitEthernet3
  - id: l14
    i1: i1
    n1: n10
    i2: i4
    n2: n14
    label: DC-2-hosts-GigabitEthernet1<->DC-2-R1-GigabitEthernet4
  - id: l15
    i1: i3
    n1: n4
    i2: i1
    n2: n15
    label: MPLS-GigabitEthernet3<->DC-1-R1-GigabitEthernet1
  - id: l16
    i1: i3
    n1: n5
    i2: i2
    n2: n15
    label: INET-GigabitEthernet3<->DC-1-R1-GigabitEthernet2
  - id: l17
    i1: i3
    n1: n6
    i2: i3
    n2: n15
    label: Cellular-GigabitEthernet3<->DC-1-R1-GigabitEthernet3
  - id: l18
    i1: i1
    n1: n6
    i2: i3
    n2: n11
    label: Cellular-GigabitEthernet1<->BR-1-R1-GigabitEthernet3
  - id: l19
    i1: i2
    n1: n2
    i2: i4
    n2: n11
    label: BR-1-SW1-GigabitEthernet1/0/1<->BR-1-R1-GigabitEthernet4
  - id: l20
    i1: i1
    n1: n9
    i2: i4
    n2: n15
    label: DC-1-hosts-GigabitEthernet1<->DC-1-R1-GigabitEthernet4
  - id: l21
    i1: i4
    n1: n12
    i2: i2
    n2: n0
    label: BR-2-R1-GigabitEthernet4<->BR-2-SW1-GigabitEthernet1/0/1
  - id: l22
    i1: i4
    n1: n13
    i2: i2
    n2: n1
    label: BR-2-R2-GigabitEthernet4<->BR-2-SW2-GigabitEthernet1/0/1
  - id: l23
    i1: i5
    n1: n12
    i2: i3
    n2: n1
    label: BR-2-R1-GigabitEthernet5<->BR-2-SW2-GigabitEthernet1/0/2
  - id: l24
    i1: i3
    n1: n13
    i2: i3
    n2: n12
    label: BR-2-R2-GigabitEthernet3<->BR-2-R1-GigabitEthernet3
  - id: l25
    i1: i5
    n1: n13
    i2: i3
    n2: n0
    label: BR-2-R2-GigabitEthernet5<->BR-2-SW1-GigabitEthernet1/0/2
  - id: l26
    i1: i0
    n1: n16
    i2: i6
    n2: n4
    label: 403-port<->MPLS-GigabitEthernet6
  - id: l27
    i1: i0
    n1: n17
    i2: i6
    n2: n5
    label: 402-port<->INET-GigabitEthernet6
  - id: l28
    i1: i0
    n1: n18
    i2: i2
    n2: n9
    label: DC-1-lan-port0<->DC-1-access-GigabitEthernet2
  - id: l29
    i1: i1
    n1: n19
    i2: i1
    n2: n18
    label: alpine-0-eth1<->DC-1-lan-port1
  - id: l30
    i1: i0
    n1: n21
    i2: i2
    n2: n18
    label: alpine-0-eth0<->DC-1-lan-port2
  - id: l31
    i1: i0
    n1: n22
    i2: i0
    n2: n20
    label: backbone-rail-port0<->backbone-port
  - id: l32
    i1: i0
    n1: n19
    i2: i1
    n2: n22
    label: services-eth0<->backbone-rail-port1
  - id: l33
    i1: i2
    n1: n10
    i2: i0
    n2: n23
    label: DC-2-access-GigabitEthernet2<->dc2-rail-port0
  - id: l34
    i1: i6
    n1: n12
    i2: i1
    n2: n0
    label: BR-2-R1-GigabitEthernet6<->BR-2-SW1-GigabitEthernet0/0
  - id: l35
    i1: i6
    n1: n13
    i2: i1
    n2: n1
    label: BR-2-R2-GigabitEthernet6<->BR-2-SW2-GigabitEthernet0/0
  - id: l36
    i1: i6
    n1: n11
    i2: i1
    n2: n2
    label: BR-1-R1-GigabitEthernet6<->BR-1-SW1-GigabitEthernet0/0
  - id: l37
    i1: i1
    n1: n23
    i2: i0
    n2: n24
    label: dc2-rail-port1<->client-2-eth0
  - id: l38
    i1: i3
    n1: n9
    i2: i0
    n2: n25
    label: DC-1-access-GigabitEthernet3<->ext-conn-0-port
  - id: l39
    i1: i0
    n1: n26
    i2: i2
    n2: n22
    label: alpine-0-eth0<->backbone-rail-port2
  - id: l40
    i1: i1
    n1: n26
    i2: i3
    n2: n18
    label: alpine-0-eth1<->dc1-rail-port3
